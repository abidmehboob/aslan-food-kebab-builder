<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Kebab Image Generation Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        .image-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .image-placeholder {
            background: white;
            border: 2px dashed #ccc;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .generated-image {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px;
            transition: all 0.3s ease;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .status {
            margin: 15px 0;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .status.loading {
            background: #e3f2fd;
            color: #1976d2;
        }
        .status.success {
            background: #e8f5e8;
            color: #2e7d32;
        }
        .status.error {
            background: #ffebee;
            color: #c62828;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
        }
        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® AI Kebab Image Generation Demo</h1>
        
        <div class="demo-section">
            <h3>Test AI Image Generation</h3>
            <p>This demo shows how AI-generated images would appear in your cart for a sample kebab configuration.</p>
            
            <button onclick="generateSampleImages()" id="generateBtn">
                üé® Generate Sample Kebab Images
            </button>
            
            <div id="status"></div>
            
            <div class="image-container" id="imageContainer">
                <div class="image-placeholder">
                    <div style="font-size: 3em; margin-bottom: 10px;">ü•ô</div>
                    <h4>Open Kebab View</h4>
                    <p>All ingredients visible</p>
                </div>
                <div class="image-placeholder">
                    <div style="font-size: 3em; margin-bottom: 10px;">üìè</div>
                    <h4>Wrapped with Measurements</h4>
                    <p>Size specifications</p>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h3>üöÄ Integration Features</h3>
            <ul>
                <li><strong>Dual Image Generation:</strong> Open view showing all ingredients + Wrapped view with measurements</li>
                <li><strong>AI-Powered Prompts:</strong> Automatically generates detailed prompts based on selected ingredients</li>
                <li><strong>Size Specifications:</strong> Shows exact measurements with white measurement lines</li>
                <li><strong>Professional Quality:</strong> Food photography style with proper lighting and composition</li>
                <li><strong>Real-time Generation:</strong> Images generated on-demand when user requests them</li>
            </ul>
        </div>

        <div class="demo-section">
            <h3>üîß Technical Implementation</h3>
            <p><strong>Current Status:</strong> Demo with SVG placeholders</p>
            <p><strong>Production Ready:</strong> Integrate with AI services like:</p>
            <ul>
                <li>OpenAI DALL-E 3</li>
                <li>Stability AI (Stable Diffusion)</li>
                <li>Midjourney API</li>
                <li>Replicate API</li>
            </ul>
            <p><strong>API Endpoint:</strong> <code>/api/kebab-builder/generate-images</code></p>
        </div>

        <a href="cart.html" class="back-link">‚Üê Back to Cart</a>
        <a href="index.html" class="back-link">üè† Back to Kebab Builder</a>
    </div>

    <script>
        function getApiBaseUrl() {
            const hostname = window.location.hostname;
            const protocol = window.location.protocol;
            
            if (hostname === 'localhost' || hostname === '127.0.0.1') {
                return 'http://localhost:3000/api';
            }
            
            if (hostname.includes('onrender.com')) {
                return `${protocol}//${hostname}/api`;
            }
            
            return `${protocol}//${hostname}/api`;
        }

        async function generateSampleImages() {
            const button = document.getElementById('generateBtn');
            const status = document.getElementById('status');
            const container = document.getElementById('imageContainer');
            
            button.disabled = true;
            button.textContent = 'üé® Generating...';
            
            status.className = 'status loading';
            status.textContent = 'üé® Generating AI images... This may take 10-15 seconds.';
            
            // Sample kebab data
            const sampleData = {
                openKebabPrompt: "High-quality food photography of an open large kebab wrap laid flat on a white marble surface. The whole wheat tortilla is fully unwrapped and spread open, showing all ingredients clearly arranged and visible: chicken breast, lamb meat, lettuce, tomatoes, onions, garlic sauce, chili sauce. Professional lighting, top-down view, ingredients are fresh and colorful, restaurant-quality presentation, ultra-detailed, 4K resolution, food styling perfection",
                wrappedKebabPrompt: "Professional food photography of a perfectly wrapped large kebab made with whole wheat tortilla, on a white background. The kebab is 25cm long and 6cm in diameter. White measurement lines and dimensions are clearly visible overlaid on the image showing exact size specifications. Clean, minimal, technical drawing style with precise measurements marked with thin white lines and text labels. High-quality, well-lit, commercial food photography",
                kebabData: {
                    size: 'large',
                    ingredients: ['Chicken Breast', 'Lamb Meat', 'Lettuce', 'Tomatoes', 'Onions', 'Garlic Sauce', 'Chili Sauce'],
                    measurements: { length: 25, diameter: 6, weight: 400 }
                }
            };
            
            try {
                const response = await fetch(`${getApiBaseUrl()}/kebab-builder/generate-images`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(sampleData)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    status.className = 'status success';
                    status.textContent = '‚úÖ Images generated successfully!';
                    
                    container.innerHTML = `
                        <div style="background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                            <img src="${data.data.openKebabImage}" 
                                 alt="Open kebab showing all ingredients" 
                                 class="generated-image">
                            <div style="padding: 15px; text-align: center;">
                                <h4 style="margin: 0; color: #333;">Open Kebab View</h4>
                                <p style="margin: 5px 0 0 0; color: #666;">All ingredients visible</p>
                            </div>
                        </div>
                        <div style="background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                            <img src="${data.data.wrappedKebabImage}" 
                                 alt="Wrapped kebab with size measurements" 
                                 class="generated-image">
                            <div style="padding: 15px; text-align: center;">
                                <h4 style="margin: 0; color: #333;">Wrapped Kebab</h4>
                                <p style="margin: 5px 0 0 0; color: #666;">
                                    üìè 25cm √ó 6cm ‚Ä¢ ‚öñÔ∏è 400g
                                </p>
                            </div>
                        </div>
                    `;
                } else {
                    throw new Error(data.message || 'Failed to generate images');
                }
                
            } catch (error) {
                console.error('Error:', error);
                status.className = 'status error';
                status.textContent = `‚ùå Error: ${error.message}`;
            } finally {
                button.disabled = false;
                button.textContent = 'üé® Generate Sample Kebab Images';
            }
        }
    </script>
</body>
</html>